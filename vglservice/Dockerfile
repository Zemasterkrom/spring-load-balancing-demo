FROM openjdk:8-jdk-alpine

ENV SERVER_PORT=${SERVER_PORT}
ENV CONFIG_SERVER_URL=${CONFIG_SERVER_URL}
ENV ENABLE_LOAD_BALANCING=${ENABLE_LOAD_BALANCING}
ARG JAR_FILE=target/*.jar
COPY ${JAR_FILE} app.jar
EXPOSE ${SERVER_PORT}

ENTRYPOINT ["java","-jar","/app.jar", "-DSERVER_PORT=${SERVER_PORT}", "-DCONFIG_SERVER_URL=${CONFIG_SERVER_URL}", "-DENABLE_LOAD_BALANCING=${ENABLE_LOAD_BALANCING}"]